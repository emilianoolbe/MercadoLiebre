<!DOCTYPE html>
<html lang="en">
<!-- Head-->
<%- include('../partials/head.ejs') %>
<title>edición de producto</title>
<!-- Head-->
<body>
<!-- Header-->
<header class="header">
    <div class="hedear-crea-tu-cuenta"> 
        <div class="header-top-bar ">    
            <a href="/"><img  src="/imagenes/img-main/logo-mercado-liebre.svg" alt="Logo Mercado Liebre" id="logo"></a>
        </div>
  
        <button class="btn btn-outline-dark"><i class="fa-solid fa-bars"></i></button>

        <nav class="header-bottom-bar"> 
            <ul class="nav-var">        
                <li><a href="#"> Ayuda |</a></li>
            </ul>     
        </nav>           
    </div>
</header>
<!-- Header-->

<!--Main-->

<main class="container main-login">
    <section class="w-100 h-100">

        <!--Como necesito el ID - en el action le envio ID por R.P.-->
        <form action="/products/editar/<%= product.id%>?_method=PUT" method="post" enctype="multipart/form-data">
           
            <div class="row justify-content-center aling-items-center m-5 p-5">
                <div class="col">
                    <h2 class="text-black-50 mt-2">Editando producto: <%= product.name%></h2>
                </div>

                <div class="row m-1 p-2">

                    <div class="col-md-6 col-sm-12">

                    <input type="text" class="form-control  <%= locals.errors && errors.name ? 'is-invalid' : null %> " name="name" value="<%= locals.oldData  && oldData.name ? oldData.nombre : product.name %>">
                    <% if (locals.errors && errors.name) { %>
                        <h6 class="text-danger">
                           <%= errors.name.msg %> 
                        </h6>
                    <% } %> 
                        
                    </div>
                    <div class="col-md-6 col-sm-12">
                    <input type="number" class="form-control  <%= locals.errors && errors.price ? 'is-invalid' : null %>" placeholder="Precio del producto:" name="price" value="<%= locals.oldData  && oldData.price ? oldData.price : product.price %>">
                    <% if (locals.errors && errors.price) { %>
                        <h6 class="text-danger">
                           <%= errors.price.msg %>
                        </h6> 
                    <% } %> 
                        
                    </div>
                </div>

                <div class="row m-1 p-2">
                    <div class="col-md-6 col-sm-12 mb-4">
                    <input type="text" class="form-control" placeholder="Descuento"  name="discount" value=" <%= locals.oldData && oldData.discount ? oldData.discount : product.discount %>">
                    </div>

                    <div class="col-md-6 col-sm-12">

                        <select class="form-select  <%= locals.errors && errors.category ? 'is-invalid' : null %>" name="category">
 
                        <option value="">Seleccione Categoría</option>
 
                         <% for (const element of category) { %> 
                         <option value="<%=element.id %>"><%= element.name %></option>           
                        <% } %> 
                        </select>

                        <% if (locals.errors && errors.category) { %>
                            <h6 class="text-danger">
                                <%= errors.category.msg %>   
                           </h6>
                        <% } %>
                        
                    </div>

                    <div class="col-md-6 col-sm-12">
                        <select class="form-select  <%= locals.errors && errors.section ? 'is-invalid' : null %>" name="section">               

                        <option value="">Sección del producto</option>
                         <% for (const element of section) { %> 
                         <option value="<%= element.id%>"><%= element.name%></option>       
                        <% } %> 
                        </select>
                        
                        <% if (locals.errors && errors.section) { %>
                            <h6 class="text-danger">
                                <%= errors.section.msg %>   
                           </h6>
                        <% } %>
                        
                    </div>

                    <div class="col-md-6 col-sm-12">
                        <select class="form-select  <%= locals.errors && errors.brand ? 'is-invalid' : null %>" name="brand">

                        <option value="">Seleccione Marca</option>
                         <% for (const element of brand) { %> 
                         <option value="<%= element.id%>"><%= element.name %></option>
                        
                        <% } %> 
                        </select>
                        <% if (locals.errors && errors.brand) { %>
                            <h6 class="text-danger">
                                <%= errors.brand.msg %>   
                           </h6>
                        <% } %>
                        
                    </div>
                </div>
                <div class=" row m-1 p-2">
                    <div class="col-12 mt-2">
                        <textarea class="form-control  <%= locals.errors && errors.description ? 'is-invalid' : null %> "" placeholder="Descripción" name="description"> <%= locals.oldData && oldData.description ? oldData.description : product.description %></textarea>
                        <% if (locals.errors && errors.description) { %>
                            <h6 class="text-danger">
                               <%= errors.description.msg %> 
                            </h6>
                        <% } %> 
                            
                    </div>
                    <div class="col-12 mt-3 mb-3">
                        <input type="file" class="form-control  <%= locals.errors && errors.img ? 'is-invalid' : null %> "" enctype="" name="img">
                        <% if (locals.errors && errors.img) { %>
                            <h6 class="text-danger">
                               <%= errors.img.msg %> 
                            </h6>
                        <% } %> 
        
                    </div>
                    <div class="col mt-2">
                        <button type="submit" class="submit-button col-12">Enviar</button>
                        <button type="reset" class="detele-button col-12 mt-2">Resetear</button>
                    </div>
                    
                </div>    
            </div>
        </form>
    </section>
</main>
<!--Main-->

<!--Footer-->
<%- include('../partials/footer.ejs') %>
<!--Footer-->
</body>
</html>