<!DOCTYPE html>
<html lang="en">
<!-- Head-->
<%- include('../partials/head.ejs') %>
<!-- Head-->
<body>
<!-- Header-->
<header class="header">
    <div class="hedear-crea-tu-cuenta"> 
        <div class="header-top-bar ">    
            <a href="/"><img  src="/imagenes/img-main/logo-mercado-liebre.svg" alt="Logo Mercado Liebre" id="logo"></a>
        </div>
  
        <button class="btn btn-outline-dark"><i class="fa-solid fa-bars"></i></button>

        <nav class="header-bottom-bar"> 
            <ul class="nav-var">        
                <li><a href="#"> Ayuda |</a></li>
            </ul>     
        </nav>           
    </div>
</header>
<!-- Header-->

<!--Main-->

<main class="container main-login">
    <section class="w-100 h-100">

        <h2 class="text-black-50 mt-2 p-2">Editar producto : <%= producto.nombre%></h2>
        
        <!--Como necesito el ID - en el action le envio ID por R.P.-->
        <form action="/products/editar/<%= producto.id%>?_method=PUT" method="post" enctype="multipart/form-data">
            <div class="row justify-content-center aling-items-center m-5 p-5">

                <div class="row  m-1  p-2">
                    <div class="col-md-6 col-sm-12 ">
                    <input type="text" class="form-control  <%= locals.errors && errors.nombre ? 'is-invalid' : null %> "" placeholder="Nombre:" aria-label="Nombre" name="nombre" value="<%= locals.oldData  && oldData.nombre ? oldData.nombre : producto.nombre %>">
                    <% if (locals.errors && errors.nombre) { %>
                        <h5 class="text-danger">
                           <%= errors.nombre.msg %> 
                        </h5>
                    <% } %> 
                        
                    </div>
                    <div class="col-md-6 col-sm-12">
                    <input type="number" class="form-control  <%= locals.errors && errors.precio ? 'is-invalid' : null %> "" placeholder="Precio del producto:" aria-label="Precio" name="precio" value="<%= locals.oldData  && oldData.precio ? oldData.precio : producto.precio %>">
                    <% if (locals.errors && errors.precio) { %>
                        <div class="text-danger">
                           <%= errors.precio.msg %>
                        </div> 
                    <% } %> 
                        
                    </div>
                </div>

                <div class="row m-1 p-2">
                    <div class="col-md-6 col-sm-12 ">
                    <input type="text" class="form-control" placeholder="Descuento" aria-label="Descuento" name="descuento" value=" <%= locals.oldData && oldData.descuento ? oldData.descuento : producto.descuento %>">
                    </div>
                    <div class="col-md-6 col-sm-12">
                        <select class="form-select  <%= locals.errors && errors.categoria ? 'is-invalid' : null %>" name="categoria">
                        
                            <option value="">Seleccione Categoría</option>
                             <% let category = ['Últimos Agregados', 'En oferta'] %> 
                             <% for (const cadaElemento of category) { %> 
                    
                             <option 
                             <%= locals.oldData && (cadaElemento === oldData.categoria) ? 'selected' : null %> 
                             > <%= cadaElemento %>  </option>
                                    
                            <% } %> 
                        
                            </select>
                            <% if (locals.errors && errors.categoria) { %>
                                <div class="text-danger">
                                    <%= errors.categoria.msg %>   
                               </div>
                            <% } %>
                    </div>
                </div> 
                <div class=" row m-1 p-2">
                    <div class="col-12">
                        <textarea class="form-control  <%= locals.errors && errors.descripcion ? 'is-invalid' : null %> "" placeholder="Descripción" name="descripcion"> <%= locals.oldData && oldData.descripcion ? oldData.descripcion : producto.descripcion %></textarea>
                        <% if (locals.errors && errors.descripcion) { %>
                            <div class="text-danger">
                               <%= errors.descripcion.msg %> 
                            </div>
                        <% } %> 
                            
                    </div>
                    <div class="col-12 mt-3 mb-3">
                        <input type="file" class="form-control  <%= locals.errors && errors.img ? 'is-invalid' : null %> "" enctype="" name="img">
                        <% if (locals.errors && errors.img) { %>
                            <div class="text-danger">
                               <%= errors.img.msg %> 
                            </div>
                        <% } %> 
        
                    </div>
                    <div class="col mt-2">
                        <button type="submit" class="submit-button col-12">Enviar</button>
                        <button type="reset" class="detele-button col-12 mt-2">Resetear</button>
                    </div>
                    
                </div>    
            </div>
        </form>
    </section>
</main>
<!--Main-->

<!--Footer-->
<%- include('../partials/footer.ejs') %>
<!--Footer-->
</body>
</html>