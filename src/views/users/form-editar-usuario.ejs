<html>

    <head>
        <%- include('../partials/head.ejs') %>
        <title>edición de usuario</title>
    </head>
    <body>

        <header class="header">

            <div class="hedear-crea-tu-cuenta">   
                <div class="header-top-bar ">       
                    <a href="/"><img  src="/imagenes/img-main/logo-mercado-liebre.svg" alt="Logo Mercado Liebre" id="logo"></a> 
                </div>
  
                <button class="btn btn-outline-dark"><i class="fa-solid fa-bars"></i></button>

                <nav class="header-bottom-bar">      
                    <ul class="nav-var">
                        <li><a href="#"> Ayuda |</a></li>
                        <% if (!locals.isLogged) { %>
                            <li><a href="/users/ingresa"> <i class="fas fa-sign-in-alt"></i> Ingresa |</a></li>
                        <% } %>
                    </ul>
                </nav> 
            </div>
  
        </header>

        <main class="main-login row">
            <section class="  section-crea-tu-cuenta container col-sm-12 col-md-6 col-lg-4">
                <article class=" formulario-crear-cuenta borde-fondo-2">
                    <form action="/users/form-editar-usuario/<%=usuario.id%>?_method=PUT" method="post" id="formulario" enctype="multipart/form-data">
                        <div class="col-sm-12">
                            <label for="nombre" class="form-label">Nombre completo</label>    
                            <input id="nombre" class="form-control" type="text" name="nombre" value="<%= locals.oldData && oldData.nombre ? oldData.nombre : usuario.username %>" >
                            <span></span>
                            <% if (locals.errors && errors.nombre) { %>
                                <h5 class="text-danger">
                                        <%= errors.nombre.msg %>   
                                </h5>
                                <% } %>
                        </div>
                        <div class="col-sm-12">
                            <label for="email" class="form-label">Correo Electrónico</label>        
                            <input id="email" type="email" name="email" class="form-control" value="<%= locals.oldData && oldData.email ? oldData.email : usuario.email %>">
                            <span></span>
                            <% if (locals.errors && errors.email) { %>
                                <h5 class="text-danger">
                                        <%= errors.email.msg %>   
                                </h5>
                                <% } %>
                        </div>
                        <div class="col-sm-12">
                            <label for="fecha" class="form-label" >Fecha de nacimiento:</label>
                            <input type="date" name="fechanacimiento" id="fechanacimiento" class="form-control" value="<%= locals.oldData ? oldData.fechanacimiento : usuario.birth_day %>">
                            <span></span>
                            <% if (locals.errors && errors.birth_day) { %>

                                <h5 class="text-danger">
                                        <%= errors.fechanacimiento.msg %>   
                                </h5>
                                <% } %>
                        </div>
                        <div class="col-sm-12">
                            <label for="domicilio" for="form-label">Direccion:</label>    
                            <input id="domicilio" type="text" name="domicilio"  value="<%= locals.oldData && oldData.domicilio ? oldData.domicilio : usuario.address %>" class="form-control">
                            <span></span>

                            <% if (locals.errors && errors.domicilio) { %>
                                <h5 class="text-danger">
                                    <%= errors.domicilio.msg %>   
                                </h5>
                                <% } %>
                        </div>
                     
                        <div class="col-sm-12">
                            <label for="fileform" class="form-label">Ávatar</label>
                            <input type="file" id="img" name="img" class=" form-control input-img-usuario">
                            <span></span>
                            <% if (locals.errors && errors.img) { %>
                                <h5 class="text-danger">
                                        <%= errors.img.msg %>   
                                </h5>
                                <% } %>
                        </div>
                        <div class="col-sm-12">
                            <label for="inputPassword4" class="form-label">Contraseña</label>
                            <input type="password" class="form-control <%= locals.errors && errors.password ? 'is-invalid' : null %>" id="password" name="password">
                            <span></span>
                            <% if (locals.errors && errors.password) { %>
                              <h5 class = "text-danger">
                                  <%= errors.password.msg %> 
                              </h5>
                              <% } %>
                          </div>
                        
                        <div class="col-sm-12 validatationIncomplete" id="formIncomplete" >
                            <p><i class="fa-solid fa-triangle-exclamation"></i> <b>Error: </b> Complete el formulario correctamente</p>
                        </div>
 

                        <div>
                            <button type="reset" class="detele-button">Borrar</button>
                            <button type="submit" class="submit-button"> Enviar</button>
                        </div>
                    </form>
                </article>
            </section>
            
        </main>

        <footer class="mt-4">
            <%- include('../partials/footer.ejs') %>
        </footer>
        
      
    </body>
    <script src="/js/validationForUsers.js"></script>
</html>